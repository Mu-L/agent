// ====== New style example ========

local.file_match "logs" {
	path_targets = [{"__path__" = "./*.log"}]
	forward_to = [loki.source.file.tail_file.receiver]
}

local.file_match "txt" {
	path_targets = [{"__path__" = "./*.txt"}]
	forward_to = [loki.source.file.tail_file.receiver]
}

loki.source.file "tail_file" {
	forward_to = [
		loki.write.test.receiver,
	]
}

loki.write "test" {
  endpoint {
    url = "http://localhost:3100/loki/api/v1/push"
  }
  external_labels = {
    test_name = "read_log_file_targets_receiver",
  }
}
